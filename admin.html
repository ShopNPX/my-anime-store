<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>NPX Admin | إدارة المخزون</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; }
        .card { background: white; padding: 15px; border-radius: 10px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        input { padding: 8px; margin: 5px; border: 1px solid #ccc; border-radius: 5px; }
        .btn { padding: 10px; border: none; border-radius: 5px; cursor: pointer; color: white; background: #6366f1; }
    </style>
</head>
<body>

    <h1>إدارة المنتجات والمخزون</h1>
    <div class="card">
        <h3>أضف منتج جديد مع كمية</h3>
        <input type="text" id="n" placeholder="الاسم">
        <input type="number" id="p" placeholder="السعر">
        <input type="number" id="q" placeholder="الكمية (مثلاً 5)">
        <input type="text" id="i" placeholder="رابط الصورة">
        <button class="btn" onclick="add()">إضافة للمتجر</button>
    </div>

    <div class="grid" id="list"></div>

<script>
    const firebaseConfig = { databaseURL: "https://authen-36a1f-default-rtdb.firebaseio.com/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref('inventory').on('value', snap => {
        const data = snap.val();
        const container = document.getElementById('list');
        container.innerHTML = '';
        for(let id in data) {
            container.innerHTML += `
                <div class="card">
                    <img src="${data[id].img}" width="100%">
                    <h4>${data[id].name}</h4>
                    <p>السعر: $${data[id].price}</p>
                    <p><b>الكمية المتبقية: ${data[id].qty}</b></p>
                    <button class="btn" style="background:red" onclick="db.ref('inventory/${id}').remove()">حذف نهائي</button>
                </div>`;
        }
    });

    function add() {
        const name = document.getElementById('n').value;
        const price = document.getElementById('p').value;
        const qty = document.getElementById('q').value;
        const img = document.getElementById('i').value;
        if(name && price && qty) {
            db.ref('inventory').push({ name, price, qty: parseInt(qty), img });
            alert("تمت الإضافة للمخزون!");
        }
    }
</script>
</body>
</html>
