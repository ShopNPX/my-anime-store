<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>NPX Admin Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; direction: rtl; }
        .card { background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; color: white; margin: 2px; }
        input { padding: 8px; margin: 5px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>Ø¥Ø¯Ø§Ø±Ø© NPX 2026</h1>
    <div class="card">
        <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
        <input id="n" placeholder="Ø§Ù„Ø§Ø³Ù…"> <input id="p" placeholder="Ø§Ù„Ø³Ø¹Ø±"> <input id="q" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©"> <input id="i" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
        <button onclick="add()" class="btn" style="background:blue">Ø¥Ø¶Ø§ÙØ©</button>
    </div>

    <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h3>
    <div id="ords"></div>

<script>
    const firebaseConfig = { databaseURL: "https://authen-36a1f-default-rtdb.firebaseio.com/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function add() {
        const n=document.getElementById('n').value, p=document.getElementById('p').value, q=document.getElementById('q').value, i=document.getElementById('i').value;
        db.ref('inventory').push({ name:n, price:p, qty:parseInt(q), img:i });
        alert("ØªÙ…!");
    }

    db.ref('orders').on('value', snap => {
        const div = document.getElementById('ords');
        div.innerHTML = '';
        snap.forEach(c => {
            const o = c.val();
            div.innerHTML += `
                <div class="card">
                    <b>Ø§Ù„Ø¹Ù…ÙŠÙ„: ${o.name}</b> (${o.status === 'delivered' ? 'âœ… ØªÙ…' : 'â³ Ù…Ø¹Ù„Ù‚'})<br>
                    <p>Ø§Ù„Ø£ØµÙ†Ø§Ù: ${o.items.map(i=>i.name).join(' - ')}</p>
                    <a href="${o.location}" target="_blank">ğŸ“ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹</a><br><br>
                    <button onclick="mark('${c.key}')" class="btn" style="background:green">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ (ÙØªØ­ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…)</button>
                    <button onclick="db.ref('orders/${c.key}').remove()" class="btn" style="background:red">Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ</button>
                </div>
            `;
        });
    });

    function mark(id) {
        db.ref('orders/' + id).update({ status: "delivered" });
        alert("ØªÙ…! Ø³ÙŠØ¸Ù‡Ø± Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø¢Ù†.");
    }
</script>
</body>
</html>
