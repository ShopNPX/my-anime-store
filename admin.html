<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>NPX Admin Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #f1f5f9; padding: 20px; direction: rtl; }
        .card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .flex { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding: 10px 0; }
        .btn { padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; color: white; font-weight: bold; }
        input, select { padding: 10px; margin: 5px; border: 1px solid #ddd; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª</h1>

    <div class="card">
        <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
        <input id="n" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
        <input id="p" placeholder="Ø§Ù„Ø³Ø¹Ø±">
        <input id="q" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
        <select id="c">
            <option value="ØªÙŠØ´ÙŠØ±Øª">ØªÙŠØ´ÙŠØ±Øª</option>
            <option value="Ù‡ÙˆØ¯ÙŠ">Ù‡ÙˆØ¯ÙŠ</option>
            <option value="Ø¥ÙƒØ³Ø³ÙˆØ§Ø±">Ø¥ÙƒØ³Ø³ÙˆØ§Ø±</option>
        </select>
        <input id="i" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
        <button onclick="add()" style="background:#6366f1" class="btn">Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬</button>
    </div>

    <div class="card">
        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
        <div id="inv"></div>
    </div>

    <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h3>
    <div id="ords"></div>

<script>
    const firebaseConfig = { databaseURL: "https://authen-36a1f-default-rtdb.firebaseio.com/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function add() {
        const n=document.getElementById('n').value, p=document.getElementById('p').value, q=document.getElementById('q').value, c=document.getElementById('c').value, i=document.getElementById('i').value;
        db.ref('inventory').push({ name:n, price:p, qty:parseInt(q), category:c, img:i });
        alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!");
    }

    db.ref('inventory').on('value', snap => {
        const inv = document.getElementById('inv');
        inv.innerHTML = '';
        snap.forEach(child => {
            const p = child.val();
            inv.innerHTML += `<div class="flex">
                <span>${p.name} (Ø§Ù„ÙƒÙ…ÙŠØ©: ${p.qty})</span>
                <div>
                    <button onclick="up('${child.key}', 1)" style="background:#22c55e" class="btn">+</button>
                    <button onclick="up('${child.key}', -1)" style="background:#f59e0b" class="btn">-</button>
                    <button onclick="db.ref('inventory/${child.key}').remove()" style="background:#ef4444" class="btn">Ø­Ø°Ù</button>
                </div>
            </div>`;
        });
    });

    function up(id, v) { db.ref(`inventory/${id}/qty`).get().then(s => db.ref(`inventory/${id}`).update({qty: s.val()+v})); }

    db.ref('orders').on('value', snap => {
        const ords = document.getElementById('ords');
        ords.innerHTML = '';
        snap.forEach(child => {
            const o = child.val();
            ords.innerHTML += `<div class="card">
                <h4>Ø§Ù„Ø¹Ù…ÙŠÙ„: ${o.name} - Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: $${o.total}</h4>
                <p>Ø§Ù„Ø£ØµÙ†Ø§Ù: ${o.items.map(i=>i.name).join(' + ')}</p>
                <a href="${o.location}" target="_blank">ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a><br><br>
                <button onclick="db.ref('orders/${child.key}').remove()" style="background:#10b981; width:100%" class="btn">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ / Ø£Ø±Ø´ÙØ©</button>
            </div>`;
        });
    });
</script>
</body>
</html>
